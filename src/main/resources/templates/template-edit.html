<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title th:text="#{welcome}"></title>
    <!-- Bootstrap CSS CDN-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
<div class="container">
    <div th:insert="~{fragments/navbar :: navbar}"></div>

    <form method="post" action="/template/save">
        <input type="hidden" th:name="templateId" th:value="${templateId}" />
        <div th:each="placeholder, iterStat : ${template.placeholders}">
            <div class="form-group">
                <label th:for="${'placeholder_' + iterStat.index}">Placeholder:</label>
                <input type="text" th:id="${'placeholder_' + iterStat.index}" th:value="${placeholder.name}" readonly />

                <label th:for="${'type_' + iterStat.index}">Type:</label>
                <select th:id="${'type_' + iterStat.index}" th:name="'placeholderTypes[' + iterStat.index + ']'" class="form-control placeholder-type">
                    <option value="TEXT" th:selected="${placeholder.type == 'TEXT'}">Text</option>
                    <option value="NUMBER" th:selected="${placeholder.type == 'NUMBER'}">Number</option>
                    <option value="DATE" th:selected="${placeholder.type == 'DATE'}">Date</option>
                    <!-- Add other types as needed -->
                </select>

                <label th:for="${'description_' + iterStat.index}">Description:</label>
                <input type="text" th:id="${'description_' + iterStat.index}" th:name="'placeholderDescriptions[' + iterStat.index + ']'" th:value="${placeholder.description}" class="form-control" />
                <div th:id="${'predefinedValuesContainer_' + iterStat.index}" class="predefined-values-container">
                    <label th:for="${'predefinedValues_' + iterStat.index}">Predefined Values:</label>
                    <input type="text" th:id="${'predefinedValues_' + iterStat.index}" th:name="'predefinedValues[' + iterStat.index + ']'"/>
                    <!-- Add a button to allow adding more predefined values -->
                    <button type="button" class="add-predefined-value" th:data-index="${iterStat.index}">Add More</button>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
</div>

<script>
    function logout(event) {
        event.preventDefault();
        document.getElementById('logoutForm').submit();
    }
</script>
<script>
    $(document).ready(function () {
        $('.placeholder-type').change(function () {
            var selectedType = $(this).val();
            var predefinedValuesContainer = $(this).closest('.form-group').find('.predefined-values-container');
            predefinedValuesContainer.empty();

            if (selectedType === 'NUMBER' || selectedType === 'DATE') {
                // Example: Add input fields for predefined values for NUMBER or DATE types
                var predefinedValuesHtml = 'Predefined Values: <input type="text" class="form-control" name="predefinedValues">';
                predefinedValuesContainer.html(predefinedValuesHtml);
            }
            // Add other conditions for different types as needed
        });
    });
</script>

<script>
    $(document).ready(function () {
        // Handle adding new predefined value inputs
        $('.add-predefined-value').click(function () {
            var index = $(this).data('index');
            var predefinedValuesContainer = $('#predefinedValuesContainer_' + index);
            var newInput = '<input type="text" name="predefinedValues[' + index + ']"/>';
            predefinedValuesContainer.append(newInput);
        });
    });
</script>

<!-- jQuery CDN -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<!-- Popper.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<!-- Bootstrap JS CDN -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>